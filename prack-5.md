## Задача 1

Исследование виртуальной стековой машины CPython.

Изучите возможности просмотра байткода ВМ CPython.

```
import dis

def foo(x):
    while x:
        x -= 1
    return x + 1

print(dis.dis(foo))
```

Опишите по шагам, что делает каждая из следующих команд (приведите эквивалентное выражение на Python):

 11           0 LOAD_FAST                0 (x)
              2 LOAD_CONST               1 (10)
              4 BINARY_MULTIPLY
              6 LOAD_CONST               2 (42)
              8 BINARY_ADD
             10 RETURN_VALUE

## Решение
LOAD_FAST 0 (x) - загружает значение переменной x из локального хранилища
LOAD_CONST 1 (10) - загружает константу 10
BINARY_MULTIPLY - умножает значение x на константу 10
LOAD_CONST 2 (42) - загружает константу 42
BINARY_ADD - складывает полученное значение с константой 42
RETURN_VALUE - возвращает результат вычислений

Это эквивалентно следующему выражению на Python:
return (x * 10) + 42

## Задача 2

Что делает следующий байткод (опишите шаги его работы)? Это известная функция, назовите ее.

```
  5           0 LOAD_CONST               1 (1)
              2 STORE_FAST               1 (r)

  6     >>    4 LOAD_FAST                0 (n)
              6 LOAD_CONST               1 (1)
              8 COMPARE_OP               4 (>)
             10 POP_JUMP_IF_FALSE       30

  7          12 LOAD_FAST                1 (r)
             14 LOAD_FAST                0 (n)
             16 INPLACE_MULTIPLY
             18 STORE_FAST               1 (r)

  8          20 LOAD_FAST                0 (n)
             22 LOAD_CONST               1 (1)
             24 INPLACE_SUBTRACT
             26 STORE_FAST               0 (n)
             28 JUMP_ABSOLUTE            4

  9     >>   30 LOAD_FAST                1 (r)
             32 RETURN_VALUE
```

## Решение

Данный байткод реализует функцию вычисления факториала числа. 
Шаги его работы:

Инициализируется переменная r значением 1.
Проверяется условие: если значение переменной n больше 1, то переходим к шагу 12, иначе переходим к шагу 30.
Умножаем значение переменной r на значение переменной n и сохраняем результат в переменной r.
Вычитаем из переменной n 1 и сохраняем новое значение в переменной n.
Переходим к шагу 4.
Если значение переменной n стало меньше или равно 1, возвращаем значение переменной r.
Таким образом, данная функция вычисляет факториал числа, пока значение переменной n больше 1, умножая при этом результат на текущее значение n.

## Задача 3

Приведите результаты из задач 1 и 2 для виртуальной машины JVM (Java) или .Net (C#).

## Решение
```
public static int foo(int);
    Code:
       0: iconst_0
       1: istore_1
       2: iload_0
       3: ifle          12
       6: iinc          1, -1
       9: goto          2
      12: iload_1
      13: iconst_1
      14: iadd
      15: ireturn

```

```
public static int factorial(int);
    Code:
       0: iconst_1
       1: istore_1
       2: iload_0
       3: iconst_1
       4: if_icmple     16
       7: iload_1
       8: iload_0
       9: imul
      10: istore_1
      11: iinc          0, -1
      14: goto          2
      16: iload_1
      17: ireturn

```
